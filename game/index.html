<!DOCTYPE html>
<html>
<head>
	<title>Winds Of Legends - 传说之风</title>
	<meta http-equiv="content-type" content="text/html;charset=utf-8" />
	<link rel="stylesheet" href="./css/screen.css" type="text/css" />
	<script src="./js/jquery-1.7.1.min.js"></script>
	<script src="./js/wool.js"></script>
	<script type="text/javascript">
	"use strict";
	wool_inject($,window);
	
	$(function () {
		$('#container').wool([
            './include/welcome.html'
            ,
            {
                valid: function(h){return h.match('^#confirm$');},
                file: './include/subscribe_confirm.html'
            },
            {
                valid: function(h){return h.match('^#sub$');},
                file: './include/subscribe_form.html',
                form: {
                    'not_empty': 'input[type="text"],input[type="password"]',
                    'email': 'input[name="email"]',
                    'field_equals': ['input[name="pwd_1"]','input[name="pwd_2"]'],
                    'submit': 'input[type="submit"]',
                    'action': function (data) {
                        $.wool.ajax.post('/r/u/', data,
                                function (data) { window.location.hash='#confirm';},
                                function (xhr, status, err) { console.error('/r/u/',status,err); }
                        );
                    }
                }
            },
            {
                valid: function(h){return h.match('^#log$')},
                file: './include/login_form.html',
                form: {
                    'not_empty': 'input[type="text"],input[type="password"]',
                    'submit': 'input[type="submit"]',
                    'action': function (data) {
                        $.wool.ajax.post('/r/', data,
                                function (data) { /* TODO cookie */ window.location.href="./play.html"; },
                                function (xhr, status, err) { console.error('/r/',status,err); }
                        );
                    }
                }
            }
        ])
	});
	
	</script>
</head>
<body>
	<noscript>If you see this, sorry but this website do not work without javascript.</noscript>
	<div id="container"></div>
	<div id="back">
		<div id="logo"></div>
		<div id="sword"></div>
		<div id="dandelion"></div>
		<div id="cross"></div>
	</div>
</body>
</html>
